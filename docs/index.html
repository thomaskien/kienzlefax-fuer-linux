<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>kienzlefax – der ideale Faxserver für die Arztpraxis</title>

  <style>
    :root{
      /* ORIGINAL-FARBGEBUNG (oben/grundsätzlich) */
      --bg:#f5f7f9;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:#e2e8f0;
      --accent:#2563eb;
      --radius:16px;
      --sans: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --shadow: 0 12px 30px rgba(0,0,0,.12);

      /* WARM NUR FÜR ABLAUF-PANELS (einfarbig, keine Verläufe) */
      --warm-ink:#2a1b12;
      --warm-line:#e6d2bf;

      --warm-1:#fff3df; /* creme */
      --warm-2:#fde6d3; /* apricot */
      --warm-3:#f7ead6; /* sand */
      --warm-4:#f5d6c8; /* terracotta-hell */

      --warm-1-br:#f1c59b;
      --warm-2-br:#e8b1a0;
      --warm-3-br:#d9c39f;
      --warm-4-br:#e0bba5;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:var(--sans);
      background:var(--bg);
      color:var(--text);
      line-height:1.45;
    }

    .wrap{
      max-width:1200px;
      margin:24px auto 60px auto;
      padding:0 16px;
    }

    header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:14px;
    }

    .brand{
      font-weight:800;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .dot{
      width:10px;
      height:10px;
      border-radius:50%;
      background:var(--accent);
    }

    nav a{
      margin-left:12px;
      font-size:14px;
      color:var(--muted);
      text-decoration:none;
    }
    nav a:hover{ text-decoration:underline; }

    /* ===== Bildstreifen: pixelgenau auf Breite skaliert, ohne Beschnitt, ohne Balken ===== */
    .strip{
      display:flex;
      gap:0;
      overflow:hidden;
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      background:#fff;
      width:100%;
      margin-bottom:22px;
    }

    .cell{
      flex:0 0 auto;
      overflow:hidden;
    }

    .cell img{
      display:block;
      width:100%;
      height:100%;
      object-fit:contain; /* kein Beschnitt */
      background:#fff;
    }

    /* nur Außenecken runden */
    .strip .cell:first-child img{
      border-top-left-radius:var(--radius);
      border-bottom-left-radius:var(--radius);
    }
    .strip .cell:last-child img{
      border-top-right-radius:var(--radius);
      border-bottom-right-radius:var(--radius);
    }

    h1{
      font-size:36px;
      margin:18px 0 8px 0;
    }

    .subtitle{
      color:var(--muted);
      margin-bottom:16px;
    }

    .cta a{
      display:inline-block;
      padding:10px 14px;
      border-radius:10px;
      border:1px solid var(--line);
      text-decoration:none;
      font-weight:600;
      margin-right:8px;
      color:var(--text);
      background:#fff;
    }

    .cta a.primary{
      background:var(--accent);
      color:#fff;
      border-color:var(--accent);
    }

    .infobox{
      margin:22px 0;
      padding:16px 18px;
      background:#eef2ff;
      border:1px solid #c7d2fe;
      border-radius:var(--radius);
      color:#1e3a8a;
      font-size:15px;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
    }

    /* ===== Install wie Vorlage ===== */
    .install{
      margin-top:18px;
      background:#fff;
      border-radius:var(--radius);
      border:1px solid var(--line);
      box-shadow:var(--shadow);
      overflow:hidden;
    }

    .install header{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      font-weight:800;
    }

    pre{
      margin:0;
      padding:16px;
      background:#0f172a;
      color:#e5e7eb;
      overflow:auto;
      font-size:14px;
      white-space:pre-wrap;
    }
    pre a{
      color:#e5e7eb;
      text-decoration:underline;
    }

    .req{
      padding:16px;
      font-size:14px;
      color:var(--muted);
    }

    /* ===== Content-Box (neutral, keine Verläufe) ===== */
    .flow{
      margin-top:18px;
      background:#fff;
      border-radius:var(--radius);
      border:1px solid var(--line);
      box-shadow:var(--shadow);
      padding:16px;
    }

    /* ===== Ablauf: Bild + Text-Karte im Wechsel (warm, einfarbig) ===== */
    .steps{
      margin-top:10px;
      display:flex;
      flex-direction:column;
      gap:22px;
    }

    .step{
      display:flex;
      gap:18px;
      align-items:stretch;
    }

    /* Bilder größer, Textboxen ~ 1/6 */
    .step .shot{
      flex:5;
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      background:#fff;
      overflow:hidden;
      display:flex;
      min-height:600px;
    }

    .step .shot img{
      width:100%;
      height:100%;
      object-fit:contain;
      display:block;
      background:#fff;
    }

    .step .panel{
      flex:1;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:16px 12px;
      display:flex;
      align-items:center;
      border:1px solid var(--warm-line);
      background:#fff;
    }

    .step .panel p{
      margin:0;
      color:var(--warm-ink);
      font-size:14px;
      line-height:1.32;
    }

    /* Schritt-Kicker: +1px */
    .kicker{
      display:inline-block;
      font-weight:900;
      font-size:13px; /* vorher 12px */
      color:var(--warm-ink);
      border:1px solid rgba(0,0,0,.10);
      padding:3px 8px;
      border-radius:999px;
      margin-right:8px;
      vertical-align:middle;
      background:rgba(255,255,255,.65);
    }

    .panel.w1{ background:var(--warm-1); border-color:var(--warm-1-br); }
    .panel.w2{ background:var(--warm-2); border-color:var(--warm-2-br); }
    .panel.w3{ background:var(--warm-3); border-color:var(--warm-3-br); }
    .panel.w4{ background:var(--warm-4); border-color:var(--warm-4-br); }

    /* Mobile */
    @media (max-width: 980px){
      .step{ flex-direction:column; }
      .step .shot{ min-height:340px; }
      .step .panel{ flex:auto; }
      .step .panel p{ font-size:15px; }
    }

    footer{
      margin-top:28px;
      font-size:13px;
      color:var(--muted);
      display:flex;
      justify-content:space-between;
      border-top:1px solid var(--line);
      padding-top:12px;
    }

    @media (max-width: 520px){
      h1{ font-size:30px; }
    }
  </style>
</head>

<body>
<div class="wrap">

<header>
  <div class="brand"><span class="dot"></span>kienzlefax</div>
  <nav>
    <a href="https://github.com/thomaskien/kienzlefax-fuer-linux">GitHub</a>
    <a href="/impressum/">Impressum</a>
  </nav>
</header>

<!-- OBEN: 3 Bilder -->
<section class="strip" id="strip-top" data-minh="320" data-maxh="640">
  <div class="cell">
    <img src="menueband.png" alt="Menüübersicht">
  </div>
  <div class="cell">
    <img src="IMG_2963.jpeg" alt="Dateiauswahl Web-UI">
  </div>
  <div class="cell">
    <img src="sendeprotokoll.png" alt="Sendeprotokoll Übersicht">
  </div>
</section>

<h1>kienzlefax – der ideale Faxserver für die Arztpraxis</h1>

<p class="subtitle">
  Drucken, auswählen, senden – mit klarer Queue, zuverlässigem Versand und sauberem Archiv.<br>
  <b>Für Arztpraxen optimiert – und für alle anderen, die viel faxen.</b><br>
  Open Source. Linux. Asterisk. Self-hosted.
</p>

<div class="cta">
  <a class="primary" href="https://github.com/thomaskien/kienzlefax-fuer-linux">GitHub</a>
  <a href="https://github.com/thomaskien/kienzlefax-fuer-linux#readme">Dokumentation</a>
</div>

<div class="infobox">
  Kein „Fax auf Fax“, keine Toner-Überraschungen – wichtige Befunde bleiben lesbar und jedes Dokument landet nachvollziehbar im Archiv.
</div>

<section class="install">
  <header>▶ Installation</header>

  <pre>Repository &amp; Dokumentation:
<a href="https://github.com/thomaskien/kienzlefax-fuer-linux">https://github.com/thomaskien/kienzlefax-fuer-linux</a>

kienzlefax basiert auf HylaFAX und Asterisk.
Installation und Konfiguration erfolgen gemäß README (Schritt für Schritt).</pre>

  <div class="req">
    <b>Voraussetzungen</b>
    <ul>
      <li><b>Läuft mit Windows-, Mac- und Linux-Clients gleichermaßen</b></li>
      <li>Linux-Server oder VM (Ubuntu LTS empfohlen)</li>
      <li>SIP-fähige Faxnummer</li>
      <li>Netzwerkzugriff der Arbeitsplätze</li>
      <li>Grundkenntnisse in Linux-Administration</li>
    </ul>

    <b>Absicherung (nach Inbetriebnahme)</b>
    <ul>
      <li>starke Passwörter</li>
      <li>SSH nur mit Key</li>
      <li>Firewall-Regeln</li>
      <li>fail2ban zum Schutz vor Brute-Force-Angriffen</li>
    </ul>
  </div>
</section>

<section class="flow">
  <h2>Ablauf</h2>

  <div class="steps">
    <!-- 1 -->
    <div class="step">
      <div class="shot">
        <img src="ablauf1.png" alt="Ablauf Schritt 1">
      </div>
      <div class="panel w1">
        <p><span class="kicker">Schritt 1</span>Auf einem der virtuellen Faxdrucker drucken oder eine PDF-Datei im vorgesehenen Ordner ablegen</p>
      </div>
    </div>

    <!-- 2 -->
    <div class="step">
      <div class="panel w2">
        <p><span class="kicker">Schritt 2</span>Im Web-UI Empfänger auswählen und Versand starten</p>
      </div>
      <div class="shot">
        <img src="ablauf2.png" alt="Ablauf Schritt 2">
      </div>
    </div>

    <!-- 3 + 4 -->
    <div class="step">
      <div class="shot">
        <img src="ablauf3.png" alt="Ablauf Schritt 3 und 4">
      </div>
      <div class="panel w3">
        <p>
          <span class="kicker">Schritt 3</span>kienzlefax verschickt jedes Dokument einzeln – auf Wunsch auch mehrere nacheinander an dieselbe Nummer (Vorbefunde).<br><br>
          <span class="kicker">Schritt 4</span>Sendebericht und Dokument werden automatisch zusammengeführt und archiviert
        </p>
      </div>
    </div>

    <!-- 5 -->
    <div class="step">
      <div class="panel w4">
        <p><span class="kicker">Schritt 5</span>Optimales Management von Sendefehlern: Fehlgeschlagene Faxe werden klar getrennt abgelegt. Das Original bleibt unverändert erhalten, der Sendebericht dokumentiert den Fehler eindeutig.</p>
      </div>
      <div class="shot">
        <img src="fehler.png" alt="Sendefehler Übersicht">
      </div>
    </div>
  </div>
</section>

<section class="flow">
  <h2>Technische Einordnung</h2>
  <ul>
    <li>Spandsp für den stabilen Faxversand</li>
    <li>Asterisk für die SIP-Anbindung</li>
    <li>Ghostscript für die PDF-Aufbereitung</li>
    <li>CUPS für die Faxdrucker-Integration</li>
    <li>Samba für die Windows-Anbindung</li>
    <li>Getrennter Worker-Dienst mit klarer Queue-Struktur</li>
  </ul>
</section>

<footer>
  <div>© Dr. Thomas Kienzle · Open Source</div>
  <div><a href="/impressum/">Impressum</a></div>
</footer>

</div>

<script>
(function(){
  function clamp(v, lo, hi){ return Math.max(lo, Math.min(hi, v)); }

  async function layoutStrip(strip){
    const imgs = Array.from(strip.querySelectorAll('img'));
    if (!imgs.length) return;

    // Ensure images are loaded to get natural sizes
    await Promise.all(imgs.map(img => {
      if (img.complete && img.naturalWidth > 0) return Promise.resolve();
      return new Promise(res => {
        img.addEventListener('load', res, {once:true});
        img.addEventListener('error', res, {once:true}); // fail-soft
      });
    }));

    const W = strip.clientWidth;
    const minH = parseInt(strip.dataset.minh || "0", 10);
    const maxH = parseInt(strip.dataset.maxh || "10000", 10);

    // Aspect ratios
    const ratios = imgs.map(img => {
      const nw = img.naturalWidth || 1;
      const nh = img.naturalHeight || 1;
      return nw / nh;
    });

    const sumR = ratios.reduce((a,b) => a+b, 0);

    // Ideal height so that sum(widths)=W
    let H = W / sumR;
    H = clamp(H, minH, maxH);

    // distribute exactly to fill W
    const rawWidths = ratios.map(r => r * H);
    const sumRaw = rawWidths.reduce((a,b)=>a+b, 0) || 1;
    const scale = W / sumRaw;

    const finalWidths = rawWidths.map(w => Math.floor(w * scale));
    const used = finalWidths.slice(0, -1).reduce((a,b)=>a+b, 0);
    finalWidths[finalWidths.length - 1] = Math.max(1, W - used);

    strip.style.height = Math.round(H * scale) + "px";

    const cells = Array.from(strip.querySelectorAll('.cell'));
    cells.forEach((cell, i) => {
      cell.style.width = finalWidths[i] + "px";
      cell.style.height = "100%";
    });
  }

  function layoutAll(){
    const top = document.getElementById('strip-top');
    if (top) layoutStrip(top);
  }

  window.addEventListener('resize', () => {
    clearTimeout(window.__fpResizeT);
    window.__fpResizeT = setTimeout(layoutAll, 80);
  });

  layoutAll();
})();
</script>
</body>
</html>
